# Руководство по быстрому старту

Запустите Speakr за несколько минут, используя предварительно собранный образ Docker! Это руководство проведет вас через самый быстрый способ развертывания Speakr с помощью OpenAI Whisper API или [пользовательского ASR-эндпоинта](features.md#speaker-diarization).

> **Примечание:** Если вы хотите использовать опцию ASR-эндпоинта для функций идентификации говорящих, вам нужно будет запустить дополнительный контейнер Docker (`onerahmet/openai-whisper-asr-webservice`). См. [Запуск ASR-сервиса для идентификации говорящих](getting-started/installation.md#running-asr-service-for-speaker-diarization) для подробных инструкций по настройке.

## Требования

Перед началом убедитесь, что на вашей системе установлены Docker и Docker Compose. Вам также понадобится API-ключ для OpenAI или OpenRouter (или совместимого сервиса), не менее 2 ГБ доступной оперативной памяти и около 10 ГБ свободного места на диске для хранения записей и транскрипций.

## Шаг 1: Создание директории проекта

Сначала создайте директорию для установки Speakr и перейдите в неё:

```bash
mkdir speakr
cd speakr
```

## Шаг 2: Загрузка файлов конфигурации

Загрузите конфигурацию Docker Compose и выберите подходящий шаблон окружения в зависимости от вашего сервиса транскрибации:

```bash
# Загрузить пример docker compose
wget https://raw.githubusercontent.com/murtaza-nasir/speakr/master/config/docker-compose.example.yml -O docker-compose.yml
```

Теперь загрузите шаблон конфигурации окружения. У вас есть два варианта в зависимости от того, какой сервис транскрибации вы хотите использовать.

Для стандартного OpenAI Whisper API (рекомендуется для большинства пользователей):
```bash
wget https://raw.githubusercontent.com/murtaza-nasir/speakr/master/config/env.whisper.example -O .env
```

Или для пользовательского ASR-эндпоинта с идентификацией говорящих (требуется дополнительный ASR-контейнер - см. примечание ниже):
```bash
wget https://raw.githubusercontent.com/murtaza-nasir/speakr/master/config/env.asr.example -O .env
```

> **Важно:** Опция ASR-эндпоинта требует запуска дополнительного контейнера Docker (`onerahmet/openai-whisper-asr-webservice`) вместе с Speakr. Для полных инструкций по настройке, включая конфигурации docker-compose для обоих контейнеров, см. [Запуск ASR-сервиса для идентификации говорящих](getting-started/installation.md#running-asr-service-for-speaker-diarization).

## Шаг 3: Настройка вашего сервиса транскрибации

Откройте файл `.env` в предпочитаемом текстовом редакторе и настройте его в зависимости от выбранного сервиса.

### Вариант A: Конфигурация OpenAI Whisper

Если вы используете OpenAI Whisper, вам нужно настроить как сервис транскрибации, так и модель генерации текста. Модель генерации текста используется для создания сводок, генерации заголовков и работы функций чата.

Отредактируйте файл `.env` и обновите эти ключевые переменные:

```bash
# Для генерации текста (сводки, чат, заголовки)
TEXT_MODEL_BASE_URL=https://openrouter.ai/api/v1
TEXT_MODEL_API_KEY=your_openrouter_api_key_here
TEXT_MODEL_NAME=openai/gpt-4o-mini

# Для транскрибации
TRANSCRIPTION_BASE_URL=https://api.openai.com/v1
TRANSCRIPTION_API_KEY=your_openai_api_key_here
WHISPER_MODEL=whisper-1
```

Модель текста может использовать OpenRouter для доступа к различным моделям ИИ, или вы можете указать её напрямую на OpenAI, используя тот же базовый URL и API-ключ, что и для вашего сервиса транскрибации. OpenRouter предоставляет доступ к множеству моделей, включая GPT-4, Claude и другие, что может быть более экономичным для задач генерации текста.

Для последних моделей GPT-5 от OpenAI (`gpt-5`, `gpt-5-mini`, `gpt-5-nano`) вы должны использовать API OpenAI напрямую с `TEXT_MODEL_BASE_URL=https://api.openai.com/v1`. См. [Руководство по конфигурации моделей](admin-guide/model-configuration.md) для подробной настройки и оптимизации GPT-5.

### Вариант B: Конфигурация пользовательского ASR-эндпоинта

> **Требования:** Этот вариант требует запуска дополнительного контейнера ASR-сервиса (`onerahmet/openai-whisper-asr-webservice`). Вы можете:
>
> - Запустить оба контейнера в одном стеке Docker Compose (рекомендуется) - см. [полное руководство по настройке](getting-started/installation.md#running-asr-service-for-speaker-diarization)
> - Запустить ASR-сервис отдельно на той же или другой машине
> - Использовать существующий ASR-сервис, если он уже развернут

Если вы используете пользовательский ASR-сервис, такой как WhisperX или самостоятельно размещенный сервер Whisper, настройте эти переменные:

```bash
# Для генерации текста (сводки, чат, заголовки)
TEXT_MODEL_BASE_URL=https://openrouter.ai/api/v1
TEXT_MODEL_API_KEY=your_openrouter_api_key_here
TEXT_MODEL_NAME=openai/gpt-4o-mini

# Включить ASR-эндпоинт
USE_ASR_ENDPOINT=true

# URL ASR-сервиса (используйте имя контейнера, если в том же docker compose)
ASR_BASE_URL=http://whisper-asr:9000
```

При использовании ASR-эндпоинта [идентификация говорящих](features.md#speaker-diarization) автоматически включается, позволяя Speakr идентифицировать разных говорящих в ваших записях. После транскрибации вам нужно будет [идентифицировать говорящих](user-guide/transcripts.md#speaker-identification), чтобы создать библиотеку говорящих. ASR_BASE_URL должен указывать на ваш ASR-сервис. Если вы запускаете ASR-сервис в том же стеке Docker Compose, используйте имя контейнера и внутренний порт (например, `http://whisper-asr:9000`). Для внешних сервисов используйте полный URL с соответствующим IP-адресом или доменным именем.

## Шаг 4: Настройка учетной записи администратора

Speakr автоматически создает пользователя-администратора при первом запуске. Настройте эти учетные данные в файле `.env` перед запуском:

```bash
ADMIN_USERNAME=admin
ADMIN_EMAIL=admin@example.com
ADMIN_PASSWORD=changeme
```

Обязательно измените эти значения на безопасные, особенно пароль. Эта учетная запись администратора будет создана автоматически при первом запуске Speakr, и вы будете использовать эти учетные данные для входа. Первый пользователь, созданный этим методом, становится системным администратором с полным доступом ко всем функциям, включая управление пользователями и системные настройки.

## Шаг 5: Запуск Speakr

После завершения настройки запустите Speakr с помощью Docker Compose:

```bash
docker compose up -d
```

Первый запуск займет несколько минут, так как Docker загружает предварительно собранный образ (около 3 ГБ) и инициализирует базу данных. Вы можете отслеживать процесс запуска, просматривая логи:

```bash
docker compose logs -f app
```

Ищите сообщение, указывающее, что приложение Flask запущено и готово принимать соединения. Нажмите Ctrl+C, чтобы выйти из просмотра логов (это не остановит контейнер).

## Шаг 6: Доступ к Speakr

После запуска контейнера откройте веб-браузер и перейдите по адресу:

```
http://localhost:8899
```

Войдите, используя учетные данные администратора, настроенные на шаге 4. Теперь вы должны увидеть панель управления Speakr, готовую для вашей первой записи.

## Ваша первая запись

После входа вы можете сразу начать использовать Speakr. Нажмите кнопку "New Recording" в верхней навигации, чтобы загрузить существующий аудиофайл или начать [прямую запись](user-guide/recording.md). Подробные инструкции см. в [руководстве по записи](user-guide/recording.md). Для загрузки Speakr поддерживает [распространенные аудиоформаты](faq.md#what-audio-formats-does-speakr-support), такие как MP3, M4A, WAV и другие, с файлами до 500 МБ по умолчанию. Вы можете изменить этот лимит в [системных настройках](admin-guide/system-settings.md). Для прямой записи вы можете захватывать с микрофона, системного аудио или обоих одновременно.

## Настройка совместной работы (необязательно)

Если вы используете Speakr с семьей или командой, вы можете использовать мощные функции совместной работы, включая группы, групповые теги и автоматический обмен. Эти функции отлично работают для проектных команд, отделов или семей, которые хотят автоматически делиться определенными типами записей.

### Создание группы

Как администратор, вы можете создавать группы для организации пользователей, которые регулярно сотрудничают:

1. Перейдите в **Admin → User Groups** в панели администратора
2. Нажмите "Create New Group" и введите имя группы (например, "Engineering Team", "Family", "Sales Department")
3. При необходимости назначьте лидера группы, который может управлять настройками группы
4. Добавьте участников, выполнив поиск по именам пользователей и нажав для добавления
5. Сохраните группу

### Создание групповых тегов

Групповые теги автоматически делятся записями со всеми участниками группы при применении:

1. При редактировании или создании группы перейдите в раздел **Tags**
2. Нажмите "Create Group Tag" и введите:
   - **Имя тега**: Как будет называться тег (например, "Team Meetings", "Family Events")
   - **Цвет**: Выберите цвет для легкой визуальной идентификации
   - **Пользовательский промпт** (необязательно): Инструкции ИИ о том, как суммировать записи с этим тегом
   - **Защищенный**: Включите, чтобы предотвратить автоматическое удаление политиками хранения
   - **Дни хранения** (необязательно): Автоматически удалять записи после этого количества дней (оставьте пустым, чтобы хранить навсегда)
3. Сохраните тег

Когда любой участник группы применяет этот тег к записи, все участники группы автоматически получают доступ к ней.

### Обмен записью с группой

Есть два способа делиться записями с группами:

**Метод 1: Использование групповых тегов** (Автоматический)
1. При загрузке или после создания записи нажмите значок тега
2. Выберите любой групповой тег, к которому у вас есть доступ
3. Все участники группы автоматически получают доступ к этой записи
4. Будущие участники группы НЕ увидят исторические записи, только новые, помеченные после их присоединения

**Метод 2: Индивидуальный обмен** (Ручной)
1. Откройте любую запись и нажмите значок обмена (значок пользователей) на панели инструментов
2. Найдите и выберите пользователей для обмена
3. Выберите уровень разрешений: только просмотр, редактирование или повторный обмен
4. Каждый пользователь получает немедленный доступ

Для получения более подробной информации о функциях совместной работы см. [Руководство по обмену и совместной работе](user-guide/sharing.md).

## Необязательные функции

### Включение режима Inquire

[Режим Inquire](user-guide/inquire-mode.md) позволяет искать по всем вашим записям, используя вопросы на естественном языке. Узнайте больше о [возможностях семантического поиска](features.md#semantic-search-inquire-mode) в руководстве по функциям. Чтобы включить его, установите это в файле `.env`:

```bash
ENABLE_INQUIRE_MODE=true
```

Затем перезапустите контейнер с помощью `docker compose restart`, чтобы изменения вступили в силу.

### Включение регистрации пользователей

По умолчанию только администратор может создавать новых пользователей. Узнайте больше об [управлении пользователями](admin-guide/user-management.md) в руководстве администратора. Чтобы разрешить самостоятельную регистрацию, установите:

```bash
ALLOW_REGISTRATION=true
```

### Настройка вашего часового пояса

Установите ваш местный часовой пояс для точного отображения временных меток:

```bash
TIMEZONE="America/New_York"
```

Используйте любой действительный часовой пояс из базы данных TZ, например "Europe/London", "Asia/Tokyo" или "UTC".

## Остановка и запуск Speakr

Чтобы остановить Speakr, сохранив все ваши данные:

```bash
docker compose down
```

Чтобы запустить снова:

```bash
docker compose up -d
```

Ваши записи, транскрипции и настройки сохраняются в директориях `./uploads` и `./instance` на вашей хост-системе.

## Решение проблем

Если Speakr не запускается должным образом, проверьте логи на наличие сообщений об ошибках, используя `docker compose logs app`. Для получения более подробной помощи см. [Руководство по решению проблем](troubleshooting.md), особенно раздел [проблемы с установкой](troubleshooting.md#installation-and-setup-issues). Распространенные проблемы включают неправильные API-ключи, которые будут показывать ошибки аутентификации в логах, или конфликты портов, если другой сервис использует порт 8899. Вы можете изменить порт, отредактировав файл `docker-compose.yml` и изменив раздел портов.

Если транскрибация не удалась, убедитесь, что ваши API-ключи правильные и у вас достаточно кредитов с выбранным сервисом. Логи покажут подробные сообщения об ошибках, которые могут помочь определить проблему.

---

Далее: [Руководство по установке](getting-started/installation.md) для производственных развертываний и расширенной конфигурации
