# Управление векторным хранилищем

Вкладка Векторное хранилище контролирует интеллект за режимом Inquire, возможностью семантического поиска Speakr, которая позволяет пользователям находить информацию по всем их записям, используя вопросы на естественном языке. Это место, где вы отслеживаете и управляете системой эмбеддингов, которая преобразует транскрипты в доступные для поиска знания.

![Управление векторным хранилищем](../assets/images/screenshots/Admin vector store.png)

## Понимание режима Inquire

Перед погружением в управление стоит понять, чем вы управляете. Режим Inquire разбивает каждый транскрипт на перекрывающиеся фрагменты текста, преобразует эти фрагменты в математические представления, называемые эмбеддингами, и хранит их в доступном для поиска формате. Когда пользователи задают вопросы, их запрос преобразуется в тот же математический формат и сравнивается со всеми сохраненными фрагментами, чтобы найти наиболее релевантную информацию.

Этот подход выходит за рамки простого сопоставления ключевых слов. Система понимает, что "проблемы с бюджетом" связаны с "финансовыми ограничениями" и "превышением затрат", даже если точные слова различаются. Это семантическое понимание делает режим Inquire мощным для обнаружения информации, которую пользователи могут не помнить точно.

## Модель эмбеддингов

Ваш экземпляр Speakr использует модель all-MiniLM-L6-v2, показанную заметно в интерфейсе. Эта модель генерирует 384-мерные векторы — представьте каждый фрагмент текста, отображенный в точку в 384-мерном пространстве, где похожие значения группируются вместе.

Эта конкретная модель была выбрана тщательно. Существуют более крупные модели с лучшей точностью, но они требуют GPU и значительных вычислительных ресурсов. Модель MiniLM работает эффективно на системах только с CPU, делая продвинутый поиск доступным без дорогой инфраструктуры. Она обрабатывает текст быстро, хорошо понимает контекст и производит компактные эмбеддинги, которые не перегружают ваше хранилище.

Модель лучше всего работает с английским текстом, так как это доминировало в её обучающих данных. Другие языки могут работать с разной степенью успеха, но английский контент всегда будет производить наиболее надежные результаты. Это ограничение — компромисс за эффективность и доступность модели.

## Обзор статуса обработки

Карточки статуса дают вам немедленное понимание здоровья вашего векторного хранилища. Total Recordings показывает, сколько аудиофайлов существует в вашей системе, в то время как Processed for Inquire указывает, сколько было преобразовано в доступные для поиска эмбеддинги. Эти числа должны в конечном итоге совпадать, хотя часто есть задержка, пока фоновая обработка догоняет.

Need Processing раскрывает записи, ожидающие генерации эмбеддингов. Это число растет, когда пользователи загружают новый контент, и уменьшается, когда фоновый процессор работает через очередь. Постоянно высокое число может указывать, что обработка остановилась или ваша система перегружена.

Total Chunks показывает гранулярные части, на которые были разделены ваши записи. Типичная часовая запись может генерировать 50-60 фрагментов, в зависимости от плотности транскрипта. Это разбиение обеспечивает, что релевантные сегменты могут быть найдены даже в очень длинных записях.

Индикатор Embeddings Status предоставляет быструю проверку здоровья. "Available" зеленым означает, что все работает правильно. Другие состояния могут указывать, что модель загружается, обработка выполняется или требуется внимание.

## Прогресс обработки

Полоса прогресса обработки показывает продвижение в реальном времени через очередь эмбеддингов. Когда на 100%, все записи обработаны и доступны для поиска. Более низкие проценты указывают на работу в процессе, с заполнением полосы по мере завершения записей.

Эта визуальная обратная связь помогает вам понять статус системы с первого взгляда. Застрявшая полоса прогресса предполагает, что обработка остановилась. Медленный прогресс может указывать на ограничения системных ресурсов. Быстрый прогресс показывает, что все работает эффективно.

## Управление очередью обработки

Кнопка Refresh Status обновляет всю статистику и индикаторы прогресса, полезно для мониторинга активной обработки или проверки, что недавние загрузки были поставлены в очередь. Интерфейс не обновляется автоматически, поэтому ручные обновления обеспечивают, что вы видите текущую информацию.

Когда система показывает, что записи нуждаются в обработке, но прогресс не продвигается, могут играть роль несколько факторов. Фоновый процессор мог остановиться, модель эмбеддингов могла не загрузиться, или системные ресурсы могут быть исчерпаны. Проверьте ваши логи на наличие конкретных сообщений об ошибках.

Система обработки разработана для устойчивости. Если обработка терпит неудачу для конкретной записи, система отмечает её и движется дальше, а не застревает. Эти неудачи появляются в ваших логах и могут потребовать ручного вмешательства для разрешения.

## Оптимизация производительности

Производительность обработки сильно зависит от ваших системных ресурсов. Модель эмбеддингов нуждается примерно в 500 МБ RAM при загрузке, плюс дополнительная память для обработки текста. Скорость CPU напрямую влияет на то, как быстро генерируются эмбеддинги — современный многоядерный процессор может обрабатывать несколько записей одновременно.

Дисковый ввод-вывод также имеет значение. Система читает транскрипты, обрабатывает их и записывает эмбеддинги обратно в базу данных. Быстрое хранилище, особенно SSD, значительно улучшает пропускную способность обработки. Если ваше векторное хранилище находится на другом диске, чем ваши транскрипты, убедитесь, что оба имеют адекватную производительность.

Сетевая задержка не должна влиять на обработку, поскольку все происходит локально, но производительность базы данных имеет значение. Регулярное обслуживание базы данных, включая оптимизацию индексов и операции вакуума, сохраняет запросы быстрыми даже по мере роста вашего векторного хранилища.

## Решение распространенных проблем

Когда режим Inquire возвращает плохие результаты, несмотря на обработанные записи, проблема может быть в формулировке запроса, а не в векторном хранилище. Поощряйте пользователей задавать полные вопросы, а не вводить ключевые слова. "Что Джон сказал о бюджете?" работает лучше, чем просто "Джон бюджет."

Если обработка кажется замороженной, проверьте, правильно ли установлена библиотека sentence-transformers. Система изящно деградирует без неё, отключая режим Inquire, а не падая, но обработка не будет продвигаться. Ваши логи покажут, загрузилась ли модель эмбеддингов успешно.

Ошибки памяти во время обработки обычно указывают, что ваша система пытается обработать слишком много одновременно. Система разбиения предотвращает перегрузку памяти отдельными записями, но обработка нескольких больших записей параллельно может превысить доступную RAM.

## Соображения масштабирования

Векторное хранилище растет предсказуемо с вашим контентом. Каждый фрагмент требует примерно 2 КБ хранилища для своего эмбеддинга и метаданных. Типичная часовая запись, генерирующая 50 фрагментов, нуждается примерно в 100 КБ хранилища эмбеддингов. Десять тысяч часов записей могут потребовать 100 МБ для эмбеддингов — управляемо даже на скромных системах.

Производительность поиска остается быстрой даже с большими векторными хранилищами благодаря эффективной индексации. Однако чрезвычайно большие экземпляры (сотни тысяч записей) могут выиграть от выделенных решений векторной базы данных, а не встроенного хранилища SQLite.

Если ваш экземпляр растет за комфортные лимиты, рассмотрите архивирование старых записей. Векторное хранилище включает только активные записи, поэтому удаление устаревшего контента улучшает как хранилище, так и производительность поиска.

---

Вернуться к [Обзору руководства администратора](index.md) →
